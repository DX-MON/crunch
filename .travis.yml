language: cpp
sudo: required
dist: trusty

before_install:
  - export GCC=$CC GXX=$CXX
  - (cd crunch++ && make lib && sudo make install-so)
  - (cd crunch && make lib && sudo make install-so)
install:
  - make
  - sudo make install

script:
  - (cd crunch++ && make test && make check)

compiler:
  - clang
  - gcc
